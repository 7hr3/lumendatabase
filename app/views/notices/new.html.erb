<section class="notice-new">
  <h3 class="title">Report a DMCA Notice</h3>
  <%= simple_form_for(@notice) do |form| %>
    <section class="notice-body">
      <h4><span>Step 1.</span> Describe the Notice</h4>
      <div class="body-wrapper left main">
        <%= form.input :title, label: "Notice Title" %>
        <%= form.input :subject %>
        <%= form.input :date_received, as: :string %>
        <%= form.input :source, label: "Sent via", placeholder: 'e.g. Online form, phone' %>
        <%= form.input :tag_list, placeholder: 'movie, youtube, video, etc.' %>
        <%=
          form.input :category_ids,
            label: "Categories",
            prompt: nil,
            collection: available_categories,
            input_html: { multiple: true }
        %>
      </div>
      <div class="body-wrapper right attach">
        <%= form.input :body, label: "Notice Body" %>
        <%= form.simple_fields_for(:file_uploads) do |file_uploads_form| %>
          <%= file_uploads_form.input :file, label: 'Attach Notice' %>
        <% end %>
      </div>
    </section>

    <section class="works">
      <h4><span>Step 2.<span> Works in Question</h4>
      <div class="body-wrapper left">
      <%= form.simple_fields_for(:works) do |works_form| %>
        <%= works_form.simple_fields_for(:infringing_urls) do |urls_form| %>
          <%= urls_form.input :url, label: "Infringing URL" %>
        <% end %>
        <%= works_form.input :url, label: "Original Work URL" %>
        <%= works_form.input :kind, label: "Kind of Work", placeholder: "Movie, Music, Book" %>
      </div>
      <div class="body-wrapper left">
        <%= works_form.input :description, label: "Work Description" %>
      </div>
      <% end %>
    </section>

    <%= form.simple_fields_for(:entity_notice_roles) do |roles_form| %>
      <% role = roles_form.object.name.titleize %>
      <section class="role <%= role.downcase %>">
        <h4><span>Step 3.</span> Notice <%= role %></h4>
        <%= roles_form.input :name, as: :hidden %>
        <%= roles_form.simple_fields_for(:entity) do |entity_form| %>
        <div class="body-wrapper left required">
          <%= entity_form.input :name, label: "Name" %>
          <%= entity_form.input :kind,
            label: "#{role} Kind", prompt: nil, collection: Entity::KINDS %>
        </div>
        <div class="body-wrapper right optional">
          <%= entity_form.input :address_line_1, label: "Address Line 1" %>
          <%= entity_form.input :address_line_2, label: "Address Line 2" %>
          <%= entity_form.input :city, label: "City" %>
          <%= entity_form.input :state, label: "State", maxlength: "2" %>
          <%= entity_form.input :zip, label: "Zip" %>
          <%= entity_form.input :country_code, label: "Country" %>
          <%= entity_form.input :phone, label: "Phone" %>
          <%= entity_form.input :email, label: "Email" %>
          <%= entity_form.input :url, label: "#{role} URL" %>
        </div>
        <% end %>
        </div>
      </section>
    <% end %>

    <div class="buttons-wrapper">
      <%= form.submit "Submit", :class => "submit" %>
    </div>
  <% end %>
</section>
